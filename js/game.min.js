define("game",["jquery","TweenMax","TimelineMax","BezierEasing"],function(e,t,a,s){function o(){var t=this;this.score=0,this.throws=0,this.throwCounter=document.querySelector(".throws-count"),this.ball=document.querySelector(".game .ball"),this.player=document.querySelector(".game .player"),this.slider={selector:document.querySelector(".game .power-bar-handler"),pos:0,delta:1,animation:requestAnimationFrame(this.sliderInit.bind(this))},this.throw=!1,document.querySelector(".game").addEventListener("click",function(e){e.preventDefault(),t.throw===!1&&(t.throw=!0,cancelAnimationFrame(t.slider.animation),t.throwBall(t.getSliderValue()))}),e(document).on("resetgame",function(){t.reset()})}o.prototype.throwBall=function(t){function o(e){var t=new a({});if(t.timeScale(1.2),t.set(r.ball,{top:0,left:0,x:0,y:0,scale:1}),t.to(r.ball,.5,{top:20,ease:Power1.easeOut}),0==e){var o=document.querySelector(".basket");setTimeout(function(){o.classList.add("goal"),setTimeout(function(){o.classList.remove("goal")},1500)},1e3),t.to(r.ball,1,{top:-400,scale:.7,ease:Power1.easeOut},.5).to(r.ball,1,{top:100,ease:Power1.easeIn},1.5).to(r.ball,2.5,{rotation:"-=320",ease:Power2.easeOut},.5)}else 1==e?t.to(r.ball,1,{top:-400,left:25,scale:.7,ease:Power1.easeOut},.5).to(r.ball,.5,{top:-220,left:30,ease:Power1.easeIn},1.5).to(r.ball,1,{bezier:{curviness:1.2,values:[{x:0,y:0},{x:-300,y:-160},{x:-700,y:400}]},ease:new Ease(s(.135,.29,.825,.535))},2).to(r.ball,.8,{bezier:{curviness:1.2,values:[{x:-700,y:400},{x:-900,y:270},{x:-1100,y:400}]},ease:new Ease(s(.31,.435,.595,.76))},3).to(r.ball,1.8,{rotation:"+=320",ease:Power2.easeOut},.5).to(r.ball,1,{rotation:"-=640",ease:Linear.easeNone},2).to(r.ball,1,{rotation:"-=640",ease:Linear.easeNone},3):2==e?t.to(r.ball,1,{top:-360,left:53,scale:.7,ease:Power1.easeOut},.5).to(r.ball,.4,{top:-210,left:76,ease:Power1.easeIn},1.5).to(r.ball,1,{bezier:{curviness:1.2,values:[{x:0,y:0},{x:450,y:-120},{x:800,y:400}]},ease:new Ease(s(.135,.29,.825,.535))},1.9).to(r.ball,.5,{bezier:{curviness:.2,values:[{x:800,y:400},{x:1100,y:200}]},ease:new Ease(s(.31,.435,.595,.76))},2.9).to(r.ball,2,{rotation:"+=480",ease:Linear.easeNone},.5).to(r.ball,1,{rotation:"+=720",ease:Linear.easeNone},2).to(r.ball,1,{rotation:"+=640",ease:Linear.easeNone},3):3==e?t.to(r.ball,1,{top:-300,left:90,scale:.7,ease:Power1.easeOut},.5).to(r.ball,.2,{top:-260,left:100,ease:Power1.easeIn},1.5).to(r.ball,1,{scale:.8,bezier:{curviness:1.2,values:[{x:0,y:0},{x:300,y:-60},{x:700,y:400}]},ease:new Ease(s(.135,.29,.825,.535))},1.7).to(r.ball,.8,{bezier:{curviness:1.2,values:[{x:700,y:400},{x:1100,y:200}]},ease:new Ease(s(.31,.435,.595,.76))},2.7).to(r.ball,2,{rotation:"+=480",ease:Linear.easeNone},.5).to(r.ball,1,{rotation:"+=960",ease:Linear.easeNone},2).to(r.ball,1,{rotation:"+=720",ease:Linear.easeNone},3):-1==e?t.to(r.ball,1,{top:-400,left:-25,scale:.7,ease:Power1.easeOut},.5).to(r.ball,.5,{top:-220,left:-30,ease:Power1.easeIn},1.5).to(r.ball,1,{bezier:{curviness:1.2,values:[{x:0,y:0},{x:300,y:-160},{x:700,y:400}]},ease:new Ease(s(.135,.29,.825,.535))},2).to(r.ball,.8,{bezier:{curviness:1.2,values:[{x:700,y:400},{x:900,y:280},{x:1100,y:400}]},ease:new Ease(s(.31,.435,.595,.76))},3).to(r.ball,2,{rotation:"-=320",ease:Power2.easeOut},.5).to(r.ball,1,{rotation:"+=640",ease:Linear.easeNone},2).to(r.ball,1,{rotation:"+=640",ease:Linear.easeNone},3):-2==e?t.to(r.ball,1,{top:-360,left:-60,scale:.7,ease:Power1.easeOut},.5).to(r.ball,.4,{top:-210,left:-75,ease:Power1.easeIn},1.5).to(r.ball,1,{bezier:{curviness:1.2,values:[{x:0,y:0},{x:-450,y:-120},{x:-800,y:400}]},ease:new Ease(s(.135,.29,.825,.535))},1.9).to(r.ball,.5,{bezier:{curviness:.2,values:[{x:-800,y:400},{x:-1100,y:200}]},ease:new Ease(s(.31,.435,.595,.76))},2.9).to(r.ball,2,{rotation:"-=480",ease:Linear.easeNone},.5).to(r.ball,1,{rotation:"-=720",ease:Linear.easeNone},2).to(r.ball,1,{rotation:"-=640",ease:Linear.easeNone},3):-3==e&&t.to(r.ball,1,{top:-300,left:-90,scale:.7,ease:Power1.easeOut},.5).to(r.ball,.2,{top:-260,left:-105,ease:Power1.easeIn},1.5).to(r.ball,1,{scale:.8,bezier:{curviness:1.2,values:[{x:0,y:0},{x:-300,y:-60},{x:-700,y:400}]},ease:new Ease(s(.135,.29,.825,.535))},1.7).to(r.ball,.8,{bezier:{curviness:1.2,values:[{x:-700,y:400},{x:-1100,y:200}]},ease:new Ease(s(.31,.435,.595,.76))},2.7).to(r.ball,2,{rotation:"-=480",ease:Linear.easeNone},.5).to(r.ball,1,{rotation:"-=960",ease:Linear.easeNone},2).to(r.ball,1,{rotation:"-=720",ease:Linear.easeNone},3);return t}var r=this;r.player.classList.add("throw"),r.throws++,r.throwCounter.innerHTML=r.throws,r.throws>=10&&setTimeout(function(){e(document).trigger("endgame")},3e3),Timeline=new a({repeat:0,delay:0,onComplete:function(){r.throw=!1,r.player.classList.remove("throw"),r.ball.removeAttribute("style"),r.ball.parentNode.classList.add("prepare"),setTimeout(function(){r.ball.parentNode.classList.remove("prepare")},1e3),requestAnimationFrame(r.sliderInit.bind(r))}}),Timeline.add(o(t)),TweenLite.to(Timeline,.5,{timeScale:1}),0===t&&setTimeout(function(){r.score++;var e=r.score;10>e&&(e="0"+e),document.querySelector(".game-results .points span").innerHTML=e,document.querySelector(".points .results-counter").setAttribute("data-to",e),document.querySelector(".fans .results-counter").setAttribute("data-to",5*e)},1800)},o.prototype.sliderInit=function(e){this.slider.pos>388?this.slider.delta=-1:this.slider.pos<=10&&(this.slider.delta=1),this.slider.pos=this.slider.pos+(10+this.throws/2)*this.slider.delta,this.slider.selector.style.left=this.slider.pos+"px",this.slider.animation=requestAnimationFrame(this.sliderInit.bind(this))},o.prototype.getSliderValue=function(){var e=this.slider.pos,t=null;return 45>=e?t=-3:e>45&&100>=e?t=-2:e>100&&161>=e?t=-1:e>100&&235>=e?t=0:e>235&&290>=e?t=1:e>290&&350>=e?t=2:e>350&&(t=3),t},o.prototype.reset=function(){this.score=0,this.throws=0,this.throwCounter.innerHTML="0",document.querySelector(".game-results .points span").innerHTML="00",document.querySelector(".points .results-counter").setAttribute("data-to",this.score),document.querySelector(".fans .results-counter").setAttribute("data-to",this.score),Array.prototype.forEach.call(document.querySelectorAll(".results-counter span"),function(e){e.innerHTML="0"})};var o=new o});